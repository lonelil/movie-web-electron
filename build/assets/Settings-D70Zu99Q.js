import{r as N,j as t,c as D,p as Ht}from"./vendor-Dkuc4jj5.js";import{R as et,S as be,z as U,U as un,u as Kt,V as gn,W as Be,X as st,B as q,Y as zt,Z as Ft,_ as hn,$ as Gt,a0 as It,a1 as mn,a2 as $t,a3 as nt,a4 as ye,a5 as Qe,a6 as fn,a7 as xn,a8 as pn,n as Wt,a9 as bn,L as qt,y as yn,aa as vn,ab as Xt,ac as it,ad as at,ae as Yt,af as tt,ag as jn,ah as Zt,ai as wn,k as Nn,aj as Ut,ak as Cn,al as Sn,am as Bt,an as Et,ao as Lt,ap as Ot,aq as _n,ar as Tn,as as Pn,at as An,au as kn,av as In,aw as Un}from"./index-C6GY8B9u.js";import{c as Ue,g as Bn}from"./auth-72H9TcpW.js";import{b as C,d as rt,H as En,a as Jt,T as Qt,k as Ln}from"./react-dom-BvhMI5o4.js";import{I as ne,a as k,s as On,F as Dn,g as Mn}from"./Icons-CJTX5XAn.js";import"./hls-2_Gpnevg.js";import"./caption-parsing-MYD78d7Z.js";import"./language-db-D-1RzKoy.js";import{S as Rn}from"./StatusCircle-DejmlZFQ.js";import"./locales-DL5iMLYx.js";var Ee={exports:{}};Ee.exports;(function(s,a){var r=200,o="__lodash_hash_undefined__",c=1,h=2,m=9007199254740991,g="[object Arguments]",x="[object Array]",M="[object AsyncFunction]",I="[object Boolean]",w="[object Date]",K="[object Error]",z="[object Function]",J="[object GeneratorFunction]",y="[object Map]",B="[object Number]",F="[object Null]",E="[object Object]",L="[object Promise]",X="[object Proxy]",Q="[object RegExp]",u="[object Set]",oe="[object String]",he="[object Symbol]",d="[object Undefined]",T="[object WeakMap]",S="[object ArrayBuffer]",de="[object DataView]",ve="[object Float32Array]",Le="[object Float64Array]",Oe="[object Int8Array]",De="[object Int16Array]",je="[object Int32Array]",Me="[object Uint8Array]",Re="[object Uint8ClampedArray]",He="[object Uint16Array]",we="[object Uint32Array]",Ke=/[\\^$.*+?()[\]{}|]/g,ze=/^\[object .+?Constructor\]$/,Fe=/^(?:0|[1-9]\d*)$/,p={};p[ve]=p[Le]=p[Oe]=p[De]=p[je]=p[Me]=p[Re]=p[He]=p[we]=!0,p[g]=p[x]=p[S]=p[I]=p[de]=p[w]=p[K]=p[z]=p[y]=p[B]=p[E]=p[Q]=p[u]=p[oe]=p[T]=!1;var Ne=typeof Ue=="object"&&Ue&&Ue.Object===Object&&Ue,ct=typeof self=="object"&&self&&self.Object===Object&&self,G=Ne||ct||Function("return this")(),lt=a&&!a.nodeType&&a,ot=lt&&!0&&s&&!s.nodeType&&s,dt=ot&&ot.exports===lt,Ge=dt&&Ne.process,ut=function(){try{return Ge&&Ge.binding&&Ge.binding("util")}catch{}}(),gt=ut&&ut.isTypedArray;function es(e,n){for(var i=-1,l=e==null?0:e.length,b=0,f=[];++i<l;){var j=e[i];n(j,i,e)&&(f[b++]=j)}return f}function ts(e,n){for(var i=-1,l=n.length,b=e.length;++i<l;)e[b+i]=n[i];return e}function ss(e,n){for(var i=-1,l=e==null?0:e.length;++i<l;)if(n(e[i],i,e))return!0;return!1}function ns(e,n){for(var i=-1,l=Array(e);++i<e;)l[i]=n(i);return l}function is(e){return function(n){return e(n)}}function as(e,n){return e.has(n)}function rs(e,n){return e==null?void 0:e[n]}function cs(e){var n=-1,i=Array(e.size);return e.forEach(function(l,b){i[++n]=[b,l]}),i}function ls(e,n){return function(i){return e(n(i))}}function os(e){var n=-1,i=Array(e.size);return e.forEach(function(l){i[++n]=l}),i}var ds=Array.prototype,us=Function.prototype,Ce=Object.prototype,$e=G["__core-js_shared__"],ht=us.toString,W=Ce.hasOwnProperty,mt=function(){var e=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ft=Ce.toString,gs=RegExp("^"+ht.call(W).replace(Ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xt=dt?G.Buffer:void 0,Se=G.Symbol,pt=G.Uint8Array,bt=Ce.propertyIsEnumerable,hs=ds.splice,ie=Se?Se.toStringTag:void 0,yt=Object.getOwnPropertySymbols,ms=xt?xt.isBuffer:void 0,fs=ls(Object.keys,Object),We=ue(G,"DataView"),me=ue(G,"Map"),qe=ue(G,"Promise"),Xe=ue(G,"Set"),Ye=ue(G,"WeakMap"),fe=ue(Object,"create"),xs=ce(We),ps=ce(me),bs=ce(qe),ys=ce(Xe),vs=ce(Ye),vt=Se?Se.prototype:void 0,Ze=vt?vt.valueOf:void 0;function ae(e){var n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){var l=e[n];this.set(l[0],l[1])}}function js(){this.__data__=fe?fe(null):{},this.size=0}function ws(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Ns(e){var n=this.__data__;if(fe){var i=n[e];return i===o?void 0:i}return W.call(n,e)?n[e]:void 0}function Cs(e){var n=this.__data__;return fe?n[e]!==void 0:W.call(n,e)}function Ss(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=fe&&n===void 0?o:n,this}ae.prototype.clear=js,ae.prototype.delete=ws,ae.prototype.get=Ns,ae.prototype.has=Cs,ae.prototype.set=Ss;function Y(e){var n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){var l=e[n];this.set(l[0],l[1])}}function _s(){this.__data__=[],this.size=0}function Ts(e){var n=this.__data__,i=Te(n,e);if(i<0)return!1;var l=n.length-1;return i==l?n.pop():hs.call(n,i,1),--this.size,!0}function Ps(e){var n=this.__data__,i=Te(n,e);return i<0?void 0:n[i][1]}function As(e){return Te(this.__data__,e)>-1}function ks(e,n){var i=this.__data__,l=Te(i,e);return l<0?(++this.size,i.push([e,n])):i[l][1]=n,this}Y.prototype.clear=_s,Y.prototype.delete=Ts,Y.prototype.get=Ps,Y.prototype.has=As,Y.prototype.set=ks;function re(e){var n=-1,i=e==null?0:e.length;for(this.clear();++n<i;){var l=e[n];this.set(l[0],l[1])}}function Is(){this.size=0,this.__data__={hash:new ae,map:new(me||Y),string:new ae}}function Us(e){var n=Pe(this,e).delete(e);return this.size-=n?1:0,n}function Bs(e){return Pe(this,e).get(e)}function Es(e){return Pe(this,e).has(e)}function Ls(e,n){var i=Pe(this,e),l=i.size;return i.set(e,n),this.size+=i.size==l?0:1,this}re.prototype.clear=Is,re.prototype.delete=Us,re.prototype.get=Bs,re.prototype.has=Es,re.prototype.set=Ls;function _e(e){var n=-1,i=e==null?0:e.length;for(this.__data__=new re;++n<i;)this.add(e[n])}function Os(e){return this.__data__.set(e,o),this}function Ds(e){return this.__data__.has(e)}_e.prototype.add=_e.prototype.push=Os,_e.prototype.has=Ds;function V(e){var n=this.__data__=new Y(e);this.size=n.size}function Ms(){this.__data__=new Y,this.size=0}function Rs(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}function Hs(e){return this.__data__.get(e)}function Ks(e){return this.__data__.has(e)}function zs(e,n){var i=this.__data__;if(i instanceof Y){var l=i.__data__;if(!me||l.length<r-1)return l.push([e,n]),this.size=++i.size,this;i=this.__data__=new re(l)}return i.set(e,n),this.size=i.size,this}V.prototype.clear=Ms,V.prototype.delete=Rs,V.prototype.get=Hs,V.prototype.has=Ks,V.prototype.set=zs;function Fs(e,n){var i=Ae(e),l=!i&&an(e),b=!i&&!l&&Je(e),f=!i&&!l&&!b&&At(e),j=i||l||b||f,_=j?ns(e.length,String):[],P=_.length;for(var v in e)(n||W.call(e,v))&&!(j&&(v=="length"||b&&(v=="offset"||v=="parent")||f&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||Vs(v,P)))&&_.push(v);return _}function Te(e,n){for(var i=e.length;i--;)if(St(e[i][0],n))return i;return-1}function Gs(e,n,i){var l=n(e);return Ae(e)?l:ts(l,i(e))}function xe(e){return e==null?e===void 0?d:F:ie&&ie in Object(e)?Js(e):nn(e)}function jt(e){return pe(e)&&xe(e)==g}function wt(e,n,i,l,b){return e===n?!0:e==null||n==null||!pe(e)&&!pe(n)?e!==e&&n!==n:$s(e,n,i,l,wt,b)}function $s(e,n,i,l,b,f){var j=Ae(e),_=Ae(n),P=j?x:ee(e),v=_?x:ee(n);P=P==g?E:P,v=v==g?E:v;var O=P==E,$=v==E,A=P==v;if(A&&Je(e)){if(!Je(n))return!1;j=!0,O=!1}if(A&&!O)return f||(f=new V),j||At(e)?Nt(e,n,i,l,b,f):Ys(e,n,P,i,l,b,f);if(!(i&c)){var R=O&&W.call(e,"__wrapped__"),H=$&&W.call(n,"__wrapped__");if(R||H){var te=R?e.value():e,Z=H?n.value():n;return f||(f=new V),b(te,Z,i,l,f)}}return A?(f||(f=new V),Zs(e,n,i,l,b,f)):!1}function Ws(e){if(!Pt(e)||tn(e))return!1;var n=_t(e)?gs:ze;return n.test(ce(e))}function qs(e){return pe(e)&&Tt(e.length)&&!!p[xe(e)]}function Xs(e){if(!sn(e))return fs(e);var n=[];for(var i in Object(e))W.call(e,i)&&i!="constructor"&&n.push(i);return n}function Nt(e,n,i,l,b,f){var j=i&c,_=e.length,P=n.length;if(_!=P&&!(j&&P>_))return!1;var v=f.get(e);if(v&&f.get(n))return v==n;var O=-1,$=!0,A=i&h?new _e:void 0;for(f.set(e,n),f.set(n,e);++O<_;){var R=e[O],H=n[O];if(l)var te=j?l(H,R,O,n,e,f):l(R,H,O,e,n,f);if(te!==void 0){if(te)continue;$=!1;break}if(A){if(!ss(n,function(Z,le){if(!as(A,le)&&(R===Z||b(R,Z,i,l,f)))return A.push(le)})){$=!1;break}}else if(!(R===H||b(R,H,i,l,f))){$=!1;break}}return f.delete(e),f.delete(n),$}function Ys(e,n,i,l,b,f,j){switch(i){case de:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case S:return!(e.byteLength!=n.byteLength||!f(new pt(e),new pt(n)));case I:case w:case B:return St(+e,+n);case K:return e.name==n.name&&e.message==n.message;case Q:case oe:return e==n+"";case y:var _=cs;case u:var P=l&c;if(_||(_=os),e.size!=n.size&&!P)return!1;var v=j.get(e);if(v)return v==n;l|=h,j.set(e,n);var O=Nt(_(e),_(n),l,b,f,j);return j.delete(e),O;case he:if(Ze)return Ze.call(e)==Ze.call(n)}return!1}function Zs(e,n,i,l,b,f){var j=i&c,_=Ct(e),P=_.length,v=Ct(n),O=v.length;if(P!=O&&!j)return!1;for(var $=P;$--;){var A=_[$];if(!(j?A in n:W.call(n,A)))return!1}var R=f.get(e);if(R&&f.get(n))return R==n;var H=!0;f.set(e,n),f.set(n,e);for(var te=j;++$<P;){A=_[$];var Z=e[A],le=n[A];if(l)var kt=j?l(le,Z,A,n,e,f):l(Z,le,A,e,n,f);if(!(kt===void 0?Z===le||b(Z,le,i,l,f):kt)){H=!1;break}te||(te=A=="constructor")}if(H&&!te){var ke=e.constructor,Ie=n.constructor;ke!=Ie&&"constructor"in e&&"constructor"in n&&!(typeof ke=="function"&&ke instanceof ke&&typeof Ie=="function"&&Ie instanceof Ie)&&(H=!1)}return f.delete(e),f.delete(n),H}function Ct(e){return Gs(e,ln,Qs)}function Pe(e,n){var i=e.__data__;return en(n)?i[typeof n=="string"?"string":"hash"]:i.map}function ue(e,n){var i=rs(e,n);return Ws(i)?i:void 0}function Js(e){var n=W.call(e,ie),i=e[ie];try{e[ie]=void 0;var l=!0}catch{}var b=ft.call(e);return l&&(n?e[ie]=i:delete e[ie]),b}var Qs=yt?function(e){return e==null?[]:(e=Object(e),es(yt(e),function(n){return bt.call(e,n)}))}:on,ee=xe;(We&&ee(new We(new ArrayBuffer(1)))!=de||me&&ee(new me)!=y||qe&&ee(qe.resolve())!=L||Xe&&ee(new Xe)!=u||Ye&&ee(new Ye)!=T)&&(ee=function(e){var n=xe(e),i=n==E?e.constructor:void 0,l=i?ce(i):"";if(l)switch(l){case xs:return de;case ps:return y;case bs:return L;case ys:return u;case vs:return T}return n});function Vs(e,n){return n=n??m,!!n&&(typeof e=="number"||Fe.test(e))&&e>-1&&e%1==0&&e<n}function en(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function tn(e){return!!mt&&mt in e}function sn(e){var n=e&&e.constructor,i=typeof n=="function"&&n.prototype||Ce;return e===i}function nn(e){return ft.call(e)}function ce(e){if(e!=null){try{return ht.call(e)}catch{}try{return e+""}catch{}}return""}function St(e,n){return e===n||e!==e&&n!==n}var an=jt(function(){return arguments}())?jt:function(e){return pe(e)&&W.call(e,"callee")&&!bt.call(e,"callee")},Ae=Array.isArray;function rn(e){return e!=null&&Tt(e.length)&&!_t(e)}var Je=ms||dn;function cn(e,n){return wt(e,n)}function _t(e){if(!Pt(e))return!1;var n=xe(e);return n==z||n==J||n==M||n==X}function Tt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=m}function Pt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function pe(e){return e!=null&&typeof e=="object"}var At=gt?is(gt):qs;function ln(e){return rn(e)?Fs(e):Xs(e)}function on(){return[]}function dn(){return!1}s.exports=cn})(Ee,Ee.exports);var Hn=Ee.exports;const Kn=Bn(Hn);function se(s){const[a,r]=N.useState(void 0);N.useEffect(()=>{r(void 0)},[s]);const o=N.useMemo(()=>!Kn(a,s)&&a!==void 0,[a,s]),c=N.useCallback(g=>{g instanceof Function?r(x=>g(x!==void 0?x:s)):r(g)},[s,r]),h=a===void 0?s:a,m=N.useCallback(()=>r(void 0),[r]);return[h,c,m,o]}function zn(s,a,r,o,c,h,m,g){const[x,M,I,w]=se(c),[K,z,J,y]=se(h),[B,F,E,L]=se(s),X=et(G=>G.setPreviewTheme),Q=N.useCallback(()=>X(s),[X,s]),[u,oe,he,d]=se(a),[T,S,de,ve]=se(r),[Le,Oe,De,je]=se(o),[Me,Re,He,we]=se(m),[Ke,ze,Fe,p]=se(g);function Ne(){E(),Q(),he(),de(),I(),J(),De(),He(),Fe()}return{reset:Ne,changed:L||d||ve||je||y||w||we||p,theme:{state:B,set:F,changed:L},appLanguage:{state:u,set:oe,changed:d},subtitleStyling:{state:T,set:S,changed:ve},deviceName:{state:Le,set:Oe,changed:je},proxyUrls:{state:x,set:M,changed:w},backendUrl:{state:K,set:z,changed:y},profile:{state:Me,set:Re,changed:we},enableThumbnails:{state:Ke,set:ze,changed:p}}}function ge(s){return t.jsx("div",{className:D("w-full rounded-lg bg-settings-card-background bg-opacity-[0.15] border border-settings-card-border",s.paddingClass??"px-8 py-6",s.className),children:s.children})}function Vt(s){return t.jsx("div",{className:D("w-full rounded-lg bg-settings-card-altBackground bg-opacity-50",s.paddingClass??"px-8 py-6",s.className),children:s.children})}function Fn(){const{t:s}=C(),a=be(),r=U(g=>g.account),{logout:o}=un(),c=Kt("account-delete"),[h,m]=rt(async()=>{!r||!a||(await gn(a,r),await o(),c.hide())},[o,r,a,c.hide]);return r?t.jsxs("div",{children:[t.jsx(Be,{border:!0,children:s("settings.account.actions.title")}),t.jsxs(Vt,{paddingClass:"px-6 py-12",className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[t.jsxs("div",{children:[t.jsx(st,{children:s("settings.account.actions.delete.title")}),t.jsx("p",{className:"text-type-text",children:s("settings.account.actions.delete.text")})]}),t.jsx("div",{className:"flex justify-start lg:justify-end items-center",children:t.jsx(q,{theme:"danger",loading:h.loading,onClick:c.show,children:s("settings.account.actions.delete.button")})})]}),t.jsx(zt,{id:c.id,children:t.jsxs(Ft,{children:[t.jsx(Be,{className:"!mt-0",children:s("settings.account.actions.delete.confirmTitle")}),t.jsx(hn,{children:s("settings.account.actions.delete.confirmDescription")}),t.jsx(q,{theme:"danger",loading:h.loading,onClick:m,children:s("settings.account.actions.delete.confirmButton")})]})})]}):null}function Gn(s){const{t:a}=C();return t.jsx(zt,{id:s.id,children:t.jsxs(Ft,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-9",children:[t.jsx(Be,{className:"!mt-0 !mb-0",children:a("settings.account.profile.title")}),t.jsx(Gt,{profile:{colorA:s.colorA,colorB:s.colorB,icon:s.userIcon},iconClass:"text-2xl",sizeClass:"w-12 h-12"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(It,{label:a("settings.account.profile.firstColor"),value:s.colorA,onInput:s.setColorA}),t.jsx(It,{label:a("settings.account.profile.secondColor"),value:s.colorB,onInput:s.setColorB}),t.jsx(mn,{label:a("settings.account.profile.userIcon"),value:s.userIcon,onInput:s.setUserIcon})]}),t.jsx("div",{className:"flex justify-center mt-8",children:t.jsx(q,{theme:"purple",className:"!px-20",onClick:s.close,children:a("settings.account.profile.finish")})})]})})}function $n(s){const{t:a}=C(),{logout:r}=$t(),o=Kt("profile-edit");return t.jsxs(ge,{paddingClass:"px-8 py-10",className:"!mt-8",children:[t.jsx(Gn,{id:o.id,close:o.hide,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),t.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[t.jsx("div",{children:t.jsx(Gt,{profile:{colorA:s.colorA,colorB:s.colorB,icon:s.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:t.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:o.show,children:[t.jsx(ne,{icon:k.EDIT}),a("settings.account.accountDetails.editProfile")]})})}),t.jsx("div",{children:t.jsxs("div",{className:"space-y-8 max-w-xs",children:[t.jsx(nt,{label:a("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:a("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:s.deviceName,onChange:c=>s.setDeviceName(c)}),t.jsx("div",{className:"flex space-x-3",children:t.jsx(q,{theme:"danger",onClick:r,children:a("settings.account.accountDetails.logoutButton")})})]})})]})]})}function Dt(s){const{t:a}=C();return t.jsxs("div",{className:D({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!s.fullscreen,"fixed inset-0 z-[60]":s.fullscreen}),children:[s.fullscreen&&s.show?t.jsx(En,{children:t.jsx("html",{"data-no-scroll":!0})}):null,t.jsx(Wt,{animation:"fade",show:s.show,children:t.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[t.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:s.onToggle,children:t.jsx(ne,{icon:s.fullscreen?k.X:k.EXPAND})}),t.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] bottom-0 p-4",children:t.jsx("div",{className:s.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:t.jsx(bn,{text:a("settings.subtitles.previewQuote")??void 0,styling:s.styling,overrideCasing:!1})})})]})})]})}function Wn(s){const{t:a}=C(),[r,o]=N.useState(!1);return t.jsxs("div",{children:[t.jsx(ye,{border:!0,children:a("settings.subtitles.title")}),t.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(Qe,{label:a("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:c=>s.setStyling({...s.styling,backgroundOpacity:c/100}),value:s.styling.backgroundOpacity*100,textTransformer:c=>`${c}%`}),t.jsx(Qe,{label:a("settings.subtitles.backgroundBlurLabel"),max:100,min:0,onChange:c=>s.setStyling({...s.styling,backgroundBlur:c/100}),value:s.styling.backgroundBlur*100,textTransformer:c=>`${c}%`}),t.jsx(Qe,{label:a("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:c=>`${c}%`,onChange:c=>s.setStyling({...s.styling,size:c/100}),value:s.styling.size*100}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(fn.FieldTitle,{children:a("settings.subtitles.colorLabel")}),t.jsx("div",{className:"flex justify-center items-center",children:xn.map(c=>t.jsx(pn,{onClick:()=>s.setStyling({...s.styling,color:c}),color:c,active:s.styling.color===c},c))})]})]}),t.jsx(Dt,{show:!0,styling:s.styling,onToggle:()=>o(c=>!c)}),t.jsx(Dt,{show:r,fullscreen:!0,styling:s.styling,onToggle:()=>o(c=>!c)})]})]})}const Mt="https://postman-echo.com/get";function qn(s){return new Promise((a,r)=>{setTimeout(()=>r(new Error("Timed out!")),3e3),vn(s,Mt,{}).then(o=>{if(o.url!==Mt)return r(new Error("Not a proxy"));a()}).catch(r)})}function Xn(){const s=U(c=>c.proxySet),{loading:a,value:r}=Jt(async()=>{const c=await yn()?"success":"unset";let h="unset";if(s&&s.length>0)try{await qn(s[0]),h="success"}catch{h="error"}return{extension:c,proxy:h,defaultProxy:"success"}},[s]);let o="unset";return((r==null?void 0:r.extension)==="success"||(r==null?void 0:r.proxy)==="success")&&(o="success"),((r==null?void 0:r.proxy)==="error"||(r==null?void 0:r.extension)==="error")&&(o="error"),{setupStates:r,globalState:o,loading:a}}function Ve(s){const{t:a}=C(),r={error:"error",success:"success",unset:"noresult"};return t.jsxs("div",{className:"flex items-start text-type-dimmed my-4",children:[t.jsx(Rn,{type:r[s.status],className:D({"!text-video-scraping-noresult !bg-video-scraping-noresult opacity-50":s.grey,"scale-90 mr-3":!0})}),t.jsxs("div",{children:[t.jsx("p",{className:D({"!text-white":s.grey&&s.highlight,"!text-type-dimmed opacity-75":s.grey&&!s.highlight,"text-type-danger":s.status==="error","text-white":s.status==="success"}),children:s.children}),s.status==="error"?t.jsx("p",{className:"max-w-96",children:a("settings.connections.setup.itemError")}):null]})]})}function Yn(){const{t:s}=C(),a=Ht(),{loading:r,setupStates:o,globalState:c}=Xn();if(r||!o)return t.jsx(ge,{children:t.jsx("div",{className:"flex py-6 items-center justify-center",children:t.jsx(qt,{})})});const h={error:{title:"settings.connections.setup.errorStatus.title",desc:"settings.connections.setup.errorStatus.description",button:"settings.connections.setup.redoSetup"},success:{title:"settings.connections.setup.successStatus.title",desc:"settings.connections.setup.successStatus.description",button:"settings.connections.setup.redoSetup"},unset:{title:"settings.connections.setup.unsetStatus.title",desc:"settings.connections.setup.unsetStatus.description",button:"settings.connections.setup.doSetup"}};return t.jsx(ge,{children:t.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-4",children:[t.jsx("div",{children:t.jsx("div",{className:D({"rounded-full h-12 w-12 flex bg-opacity-15 justify-center items-center":!0,"text-type-success bg-type-success":c==="success","text-type-danger bg-type-danger":c==="error"||c==="unset"}),children:t.jsx(ne,{icon:c==="success"?k.CHECKMARK:k.X,className:"text-xl"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx(st,{className:"!mb-3",children:s(h[c].title)}),t.jsx("p",{className:"max-w-[20rem] font-medium mb-6",children:s(h[c].desc)}),t.jsx(Ve,{status:o.extension,children:s("settings.connections.setup.items.extension")}),t.jsx(Ve,{status:o.proxy,children:s("settings.connections.setup.items.proxy")}),t.jsx(Ve,{grey:!0,highlight:c==="unset",status:o.defaultProxy,children:s("settings.connections.setup.items.default")})]}),t.jsx("div",{className:"md:mt-5",children:t.jsx(q,{theme:"purple",onClick:()=>a("/onboarding"),children:s(h[c].button)})})]})})}function Zn(s){let{proxyUrls:a,setProxyUrls:r}=s;const{t:o}=C(),c=N.useCallback(()=>{r(g=>[...g??[],""])},[r]),h=N.useCallback((g,x)=>{r(M=>[...(M??[]).map((I,w)=>w!==g?I:x)])},[r]),m=N.useCallback(g=>{r(x=>[...(x??[]).filter((M,I)=>I!==g)])},[r]);return t.jsxs(ge,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.workers.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:t.jsx(Qt,{i18nKey:"settings.connections.workers.description",children:t.jsx(Xt,{to:"https://movie-web.github.io/docs/proxy/deploy",children:"Proxy documentation"})})})]}),t.jsx("div",{children:t.jsx(it,{onClick:()=>r(g=>g===null?[]:null),enabled:a!==null})})]}),a!==null?t.jsxs(t.Fragment,{children:[t.jsx(at,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.workers.urlLabel")}),t.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((a==null?void 0:a.length)??0)===0?t.jsx("p",{children:o("settings.connections.workers.emptyState")}):null,(a??[]).map((g,x)=>t.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[t.jsx(nt,{value:g,onChange:M=>h(x,M),placeholder:o("settings.connections.workers.urlPlaceholder")??void 0}),t.jsx("button",{type:"button",onClick:()=>m(x),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:t.jsx(ne,{className:"text-xl",icon:k.X})})]},x))]}),t.jsx(q,{theme:"purple",onClick:c,children:o("settings.connections.workers.addButton")})]}):null]})}function Jn(s){let{backendUrl:a,setBackendUrl:r}=s;const{t:o}=C();return t.jsxs(ge,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.server.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:t.jsx(Qt,{i18nKey:"settings.connections.server.description",children:t.jsx(Xt,{to:"https://movie-web.github.io/docs/backend/deploy",children:"Backend documentation"})})})]}),t.jsx("div",{children:t.jsx(it,{onClick:()=>r(c=>c===null?"":null),enabled:a!==null})})]}),a!==null?t.jsxs(t.Fragment,{children:[t.jsx(at,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.server.urlLabel")}),t.jsx(nt,{onChange:r,value:a??""})]}):null]})}function Qn(s){const{t:a}=C();return t.jsxs("div",{children:[t.jsx(ye,{border:!0,children:a("settings.connections.title")}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(Yn,{}),t.jsx(Zn,{proxyUrls:s.proxyUrls,setProxyUrls:s.setProxyUrls}),t.jsx(Jn,{backendUrl:s.backendUrl,setBackendUrl:s.setBackendUrl})]})]})}function Vn(s){return t.jsx("p",{className:"text-type-text",children:s.children})}function ei(s){const{t:a}=C(),r=be(),o=U(m=>{var g;return(g=m.account)==null?void 0:g.token}),[c,h]=rt(async()=>{var m;if(!o)throw new Error("No token present");if(!r)throw new Error("No backend set");await jn(r,o,s.id),(m=s.onRemove)==null||m.call(s)},[r,o,s.id]);return t.jsxs(ge,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[t.jsxs("div",{className:"font-medium",children:[t.jsx(Vn,{children:a("settings.account.devices.deviceNameLabel")}),t.jsx("p",{className:"text-white",children:s.name})]}),s.isCurrent?null:t.jsx(q,{theme:"danger",loading:c.loading,onClick:h,children:a("settings.account.devices.removeDevice")})]})}function ti(s){const{t:a}=C(),r=U(m=>{var g;return(g=m.account)==null?void 0:g.seed}),o=s.sessions,c=U(m=>{var g;return(g=m.account)==null?void 0:g.sessionId}),h=N.useMemo(()=>{if(!r)return[];let m=o.map(g=>{const x=Yt(g.device,tt(r));return{current:g.id===c,id:g.id,name:x}});return m=m.sort((g,x)=>g.current?-1:x.current?1:g.name.localeCompare(x.name)),m},[r,o,c]);return r?t.jsxs("div",{children:[t.jsx(Be,{border:!0,className:"mt-0 mb-9",children:a("settings.account.devices.title")}),s.error?t.jsx("p",{children:a("settings.account.devices.failed")}):s.loading?t.jsx(qt,{}):t.jsx("div",{className:"space-y-5",children:h.map(m=>t.jsx(ei,{name:m.name,id:m.id,isCurrent:m.current,onRemove:s.onChange},m.id))})]}):null}function si(){const s=Ht(),{t:a}=C();return t.jsx("div",{children:t.jsxs(Vt,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[t.jsxs("div",{children:[t.jsx(st,{children:a("settings.account.register.title")}),t.jsx("p",{className:"text-type-text",children:a("settings.account.register.text")})]}),t.jsx("div",{className:"flex justify-end items-center",children:t.jsx(q,{theme:"purple",onClick:()=>s("/register"),children:a("settings.account.register.cta")})})]})})}function Rt(s){return t.jsxs("section",{className:s.className??"",children:[t.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:s.title}),s.children]})}function ni(s){return t.jsxs("button",{type:"button",onClick:s.onClick,className:D("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",s.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[t.jsx(ne,{className:D("text-2xl text-settings-sidebar-type-icon",s.active?"text-settings-sidebar-type-iconActivated":null),icon:s.icon}),t.jsx("span",{children:s.children})]})}const ii=16;function ai(s){const{t:a}=C(),r=s.url?s.url.startsWith("https://"):!1;return t.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[t.jsx(ne,{icon:r?k.LOCK:k.UNLOCK}),a(r?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function ri(){var I;const{t:s}=C(),{isMobile:a}=Zt(),{account:r}=U(),o=location.hostname,[c,h]=N.useState(""),m=[{textKey:"settings.account.title",id:"settings-account",icon:k.USER},{textKey:"settings.preferences.title",id:"settings-preferences",icon:k.SETTINGS},{textKey:"settings.appearance.title",id:"settings-appearance",icon:k.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:k.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:k.LINK}],g=be(),x=Jt(async()=>{if(g)return wn(g)},[g]);N.useEffect(()=>{function w(){var y;const z=(window.innerHeight||document.documentElement.clientHeight)/4,J=m.map(B=>{const F=document.getElementById(B.id);if(!F)return{distance:1/0,link:B.id};const E=F.getBoundingClientRect(),L=Math.abs(z-E.top),X=Math.abs(z-E.bottom);return{distance:Math.min(X,L),link:B.id}}).sort((B,F)=>B.distance-F.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?h(m[m.length-1].id):h(((y=J[0])==null?void 0:y.link)??"")}return document.addEventListener("scroll",w),w(),()=>{document.removeEventListener("scroll",w)}});const M=N.useCallback(w=>{const K=document.getElementById(w);if(!K)return null;const z=K.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:z-120,behavior:"smooth"})},[]);return t.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:t.jsxs(Ln,{topOffset:-6*ii,stickyClassName:"pt-[6rem]",disabled:a,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[t.jsxs("div",{className:"hidden lg:block",children:[t.jsx(Rt,{title:s("global.pages.settings"),children:m.map(w=>t.jsx(ni,{icon:w.icon,active:w.id===c,onClick:()=>M(w.id),children:s(w.textKey)},w.id))}),t.jsx(at,{})]}),t.jsx(Rt,{className:"text-sm",title:s("settings.sidebar.info.title"),children:t.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.hostname")}),t.jsx("p",{className:"text-white",children:o})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[t.jsx("p",{children:s("settings.sidebar.info.backendUrl")}),t.jsx(ai,{url:g})]}),t.jsx("p",{className:"text-white",children:(g==null?void 0:g.replace(/https?:\/\//,""))??"—"})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.userId")}),t.jsx("p",{className:"text-white",children:(r==null?void 0:r.userId)??s("settings.sidebar.info.notLoggedIn")})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.appVersion")}),t.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:Nn().APP_VERSION})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.backendVersion")}),t.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[x.error?t.jsx(ne,{icon:k.WARNING,className:"text-type-danger text-base"}):null,x.loading?t.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((I=x==null?void 0:x.value)==null?void 0:I.version)||s("settings.sidebar.info.unknownVersion")]})]})]})})]})})}const ci=[{id:"default",selector:"theme-default",key:"settings.appearance.themes.default"},{id:"blue",selector:"theme-blue",key:"settings.appearance.themes.blue"},{id:"teal",selector:"theme-teal",key:"settings.appearance.themes.teal"},{id:"red",selector:"theme-red",key:"settings.appearance.themes.red"},{id:"gray",selector:"theme-gray",key:"settings.appearance.themes.gray"}],li=function(a){const{t:r}=C();return t.jsxs("div",{className:D(a.selector,"cursor-pointer group tabbable"),onClick:a.onClick,children:[t.jsxs("div",{tabIndex:0,onKeyUp:o=>o.key==="Enter"&&o.currentTarget.click(),className:D("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",a.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[t.jsxs("div",{className:"absolute top-2 left-2",children:[t.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),t.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),t.jsx(ne,{icon:k.CHECKMARK,className:D("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",a.active?"opacity-100":"opacity-0")}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:t.jsxs("div",{className:"relative w-full h-full",children:[t.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),t.jsxs("div",{className:"p-2 flex justify-between items-center",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),t.jsxs("div",{className:"mt-5 px-3",children:[t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),t.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsx("span",{className:"font-medium text-white",children:a.name}),t.jsx("span",{className:D("inline-block px-3 py-1 leading-tight text-sm transition-opacity duration-150 rounded-full bg-pill-activeBackground text-white/85",a.inUse?"opacity-100":"opacity-0 pointer-events-none"),children:r("settings.appearance.activeTheme")})]})]})},oi=li;function di(s){const{t:a}=C();return t.jsxs("div",{children:[t.jsx(ye,{border:!0,children:a("settings.appearance.title")}),t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-6 max-w-[700px]",children:ci.map(r=>t.jsx(oi,{selector:r.selector,active:s.active===r.id,inUse:s.inUse===r.id,name:a(r.key),onClick:()=>s.setTheme(r.id)},r.id))})]})}function ui(s){const{t:a}=C(),r=On(Ut.map(h=>h.code)),o=Ut.sort((h,m)=>r.indexOf(h.code)-r.indexOf(m.code)).map(h=>({id:h.code,name:`${h.name}${h.nativeName?` — ${h.nativeName}`:""}`,leftIcon:t.jsx(Dn,{langCode:h.code})})),c=o.find(h=>{var m;return h.id===((m=Mn(s.language))==null?void 0:m.code)});return t.jsxs("div",{className:"space-y-12",children:[t.jsx(ye,{border:!0,children:a("settings.preferences.title")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:a("settings.preferences.language")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:a("settings.preferences.languageDescription")}),t.jsx(Cn,{options:o,selectedItem:c||o[0],setSelectedItem:h=>s.setLanguage(h.id)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:a("settings.preferences.thumbnail")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:a("settings.preferences.thumbnailDescription")}),t.jsxs("div",{onClick:()=>s.setEnableThumbnails(!s.enableThumbnails),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[t.jsx(it,{enabled:s.enableThumbnails}),t.jsx("p",{className:"flex-1 text-white font-bold",children:a("settings.preferences.thumbnailLabel")})]})]})]})}function gi(s){const{isMobile:a}=Zt();return t.jsx(Un,{ultraWide:!0,classNames:"overflow-visible",children:t.jsxs("div",{className:D("grid gap-12",a?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),children:[t.jsx(ri,{}),t.jsx("div",{children:s.children})]})})}function hi(s){const a=be(),{account:r}=s,[o,c]=rt(()=>a?Sn(a,r):Promise.resolve([]),[r,a]);return N.useEffect(()=>{c()},[c]),t.jsxs(t.Fragment,{children:[t.jsx($n,{deviceName:s.deviceName,setDeviceName:s.setDeviceName,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),t.jsx(ti,{error:!!o.error,loading:o.loading,sessions:o.value??[],onChange:c}),t.jsx(Fn,{})]})}function Ci(){const{t:s}=C(),a=Bt(d=>d.theme),r=Bt(d=>d.setTheme),o=et(d=>d.previewTheme),c=et(d=>d.setPreviewTheme),h=Et(d=>d.language),m=Et(d=>d.setLanguage),g=Lt(d=>d.styling),x=Lt(d=>d.updateStyling),M=U(d=>d.proxySet),I=U(d=>d.setProxySet),w=U(d=>d.backendUrl),K=U(d=>d.setBackendUrl),z=Ot(d=>d.enableThumbnails),J=Ot(d=>d.setEnableThumbnails),y=U(d=>d.account),B=U(d=>d.setAccountProfile),F=U(d=>d.updateDeviceName),E=N.useMemo(()=>y?Yt(y.deviceName,tt(y.seed)):"",[y]),L=be(),{logout:X}=$t(),Q=U(),u=zn(a,h,g,E,M,w,y==null?void 0:y.profile,z);N.useEffect(()=>{c(a??"default")},[c,a]),N.useEffect(()=>()=>{c(null)},[c]);const oe=N.useCallback(d=>{u.theme.set(d==="default"?null:d),c(d)},[u.theme,c]),he=N.useCallback(async()=>{var d,T;if(y&&L){if((u.appLanguage.changed||u.theme.changed||u.proxyUrls.changed)&&await _n(L,y,{applicationLanguage:u.appLanguage.state,applicationTheme:u.theme.state,proxyUrls:((d=u.proxyUrls.state)==null?void 0:d.filter(S=>S!==""))??null}),u.deviceName.changed){const S=await Tn(u.deviceName.state,tt(y.seed));await Pn(L,y,{deviceName:S}),F(S)}u.profile.changed&&await An(L,y,{profile:u.profile.state})}if(J(u.enableThumbnails.state),m(u.appLanguage.state),r(u.theme.state),x(u.subtitleStyling.state),I(((T=u.proxyUrls.state)==null?void 0:T.filter(S=>S!==""))??null),u.profile.state&&B(u.profile.state),u.backendUrl.changed){await X();let S=u.backendUrl.state;S&&!S.startsWith("http://")&&!S.startsWith("https://")&&(S=`https://${S}`),K(S)}},[u,y,L,J,m,r,x,F,B,I,K,X]);return t.jsxs(kn,{children:[t.jsx(In,{subpage:!0,k:"global.pages.settings"}),t.jsxs(gi,{children:[t.jsxs("div",{id:"settings-account",children:[t.jsx(ye,{border:!0,className:"!mb-0",children:s("settings.account.title")}),Q.account&&u.profile.state?t.jsx(hi,{account:Q.account,deviceName:u.deviceName.state,setDeviceName:u.deviceName.set,colorA:u.profile.state.colorA,setColorA:d=>{u.profile.set(T=>T?{...T,colorA:d}:void 0)},colorB:u.profile.state.colorB,setColorB:d=>u.profile.set(T=>T?{...T,colorB:d}:void 0),userIcon:u.profile.state.icon,setUserIcon:d=>u.profile.set(T=>T?{...T,icon:d}:void 0)}):t.jsx(si,{})]}),t.jsx("div",{id:"settings-preferences",className:"mt-48",children:t.jsx(ui,{language:u.appLanguage.state,setLanguage:u.appLanguage.set,enableThumbnails:u.enableThumbnails.state,setEnableThumbnails:u.enableThumbnails.set})}),t.jsx("div",{id:"settings-appearance",className:"mt-48",children:t.jsx(di,{active:o??"default",inUse:a??"default",setTheme:oe})}),t.jsx("div",{id:"settings-captions",className:"mt-48",children:t.jsx(Wn,{styling:u.subtitleStyling.state,setStyling:u.subtitleStyling.set})}),t.jsx("div",{id:"settings-connection",className:"mt-48",children:t.jsx(Qn,{backendUrl:u.backendUrl.state,setBackendUrl:u.backendUrl.set,proxyUrls:u.proxyUrls.state,setProxyUrls:u.proxyUrls.set})})]}),t.jsxs(Wt,{animation:"fade",show:u.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3",children:[t.jsx("p",{className:"text-type-danger",children:s("settings.unsaved")}),t.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[t.jsx(q,{className:"w-full md:w-auto",theme:"secondary",onClick:u.reset,children:s("settings.reset")}),t.jsx(q,{className:"w-full md:w-auto",theme:"purple",onClick:he,children:s("settings.save")})]})]})]})}export{hi as AccountSettings,Ci as SettingsPage,Ci as default};
//# sourceMappingURL=Settings-D70Zu99Q.js.map
